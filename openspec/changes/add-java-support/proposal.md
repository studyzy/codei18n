# 变更：增加 Java 语言支持

## 为什么
Java 是企业级和后端开发中使用最广泛的语言之一，团队中常见同时维护 Go/Rust/JS/TS/Java 多语言代码库的场景。目前 CodeI18n 已通过 Rust 与 JS/TS 适配器验证了基于 Tree-sitter 的多语言扩展能力，但尚不支持 Java 源码的注释扫描和国际化映射。这导致 Java 项目无法享受统一的“英文为唯一事实源、本地语言在 IDE 中展示”的工作流。

增加 Java 支持可以：
- 覆盖常见的后端/微服务场景，使 CodeI18n 可以贯穿前后端代码库；
- 复用既有 Tree-sitter 适配器模式，验证语言扩展机制的可扩展性；
- 为后续引入更多 JVM 语言（如 Kotlin、Scala）提供模式参考。

## 变更内容
- 新增 Java 语言适配器：在 `adapters/java` 包中实现 `LanguageAdapter` 接口，基于 Tree-sitter Java 语法解析器，从 `.java` 文件中提取注释并绑定到对应的语义符号（类、方法、字段等）。
- 文件扩展名支持：在适配器注册表中为 `.java` 文件扩展名增加分派逻辑，使 `codei18n scan` 等 CLI 命令可以自动识别并处理 Java 文件。
- 注释类型覆盖：适配器必须识别 Java 的行注释、块注释以及 Javadoc 文档注释，并为不同类型设置正确的注释类型枚举。
- 符号绑定规则：定义并实现 Java 特有的 Symbol 绑定规则（如 `包名.类名`、`类名.方法名`），保证注释与语义节点的绑定在重构和格式变更后仍然稳定。
- 健壮性与测试：为 Java 适配器补充单元测试和集成测试，覆盖常见语法结构（类、接口、枚举、内部类、泛型方法等）以及包含语法错误的容错场景。

本变更不引入任何破坏性 API 变更，属于在现有多语言适配架构上的增量扩展。

## 影响
- 受影响规范：
  - `java-adapter`（新增能力，定义 Java 注释解析和符号绑定行为）。
- 受影响代码（预期）：
  - `adapters/registry.go`：增加 `.java` 扩展名与 Java 适配器的映射逻辑。
  - `adapters/rust/*`、`adapters/typescript/*`：作为设计参考，不修改其行为，仅对齐模式与测试结构。
  - `core/scanner/*`：复用现有基于适配器的扫描流程，无需行为变更，但需要在测试中覆盖 `.java` 文件场景。
  - `cmd/codei18n/scan.go`：不需要新增 flag，仅通过扩展适配器支持 `.java` 实现 CLI 行为扩展。
- 受影响用户：
  - 使用 Java 的工程团队可以在不改变现有代码风格的前提下，将 Java 项目纳入 CodeI18n 的注释国际化工作流。
